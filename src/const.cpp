#include <Arduino.h>

#include "struct.h"
#include "const.h"

//Tableau faisant le lien entre tension et capacité restante
// Je suis obligé de commenter certaines valeurs pour que le tableau ne soit pas trop grand
// et que le programme ne dépasse pas la mémoire de l'Arduino
const batteryCapacity remainingCapacity[] = {
    // {4.18, 100},
    // {4.15, 99},
    {4.13, 98},
    {4.11, 97},
    // {4.09, 96},
    {4.07, 95},
    // {4.05, 94},
    // {4.04, 93},
    {4.02, 92},
    // {4.01, 91},
    {3.99, 90},
    // {3.98, 89},
    // {3.97, 88},
    {3.96, 87},
    // {3.95, 86},
    {3.94, 85},
    // {3.93, 84},
    {3.92, 83},
    // {3.91, 82},
    {3.90, 80},
    // {3.89, 79},
    {3.88, 78},
    // {3.87, 77},
    {3.86, 75},
    // {3.85, 74},
    // {3.84, 73},
    {3.83, 72},
    // {3.82, 71},
    // {3.82, 70},
    {3.81, 69},
    // {3.80, 68},
    {3.79, 67},
    // {3.78, 66},
    {3.77, 65},
    // {3.76, 64},
    {3.75, 63},
    {3.74, 62},
    // {3.73, 61},
    {3.72, 60},
    // {3.71, 58},
    {3.70, 57},
    // {3.69, 56},
    {3.68, 55},
    {3.67, 54},
    // {3.66, 53},
    {3.65, 52},
    // {3.64, 51},
    {3.63, 50},
    // {3.62, 49},
    {3.61, 48},
    {3.60, 47},
    // {3.59, 46},
    {3.58, 45},
    // {3.57, 44},
    {3.56, 43},
    // {3.55, 42},
    {3.54, 40},
    // {3.53, 39},
    {3.52, 38},
    // {3.51, 37},
    {3.50, 36},
    // {3.49, 34},
    {3.48, 33},
    // {3.47, 32},
    {3.46, 30},
    // {3.45, 29},
    {3.44, 28},
    // {3.43, 27},
    {3.42, 25},
    // {3.41, 24},
    {3.40, 23},
    {3.39, 22},
    // {3.38, 21},
    {3.37, 20},
    {3.36, 19},
    // {3.35, 18},
    {3.33, 17},
    // {3.32, 16},
    {3.31, 15},
    // {3.29, 14},
    {3.27, 13},
    // {3.26, 12},
    // {3.24, 11},
    {3.21, 10},
    // {3.19, 9},
    {3.16, 8},
    // {3.14, 6},
    {3.11, 4},
    // {3.07, 2},
    // {3.04, 1},
    // {3.00, 0},
};

//Calcul du nombre de cellules du tableau de correspondance Tension/Capacité
const int ncell = sizeof(remainingCapacity) / sizeof(struct batteryCapacity);